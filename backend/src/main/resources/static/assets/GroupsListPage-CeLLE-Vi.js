import{j as e,r as x,B as o,u as p,a as b,I as f,c as N,b as v}from"./index-D49t0lQR.js";import{X as w,u as k,a as C,E as g,U as d,P as h,C as G,b as S}from"./EmptyState-B8uy_Cys.js";function E({title:r,description:s,action:a}){return e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r}),s&&e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:s})]}),a&&e.jsx("div",{children:a})]})})}function c({className:r=""}){return e.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-700 rounded ${r}`})}function m(){return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx(c,{className:"h-6 w-3/4 mb-4"}),e.jsx(c,{className:"h-4 w-full mb-2"}),e.jsx(c,{className:"h-4 w-5/6"})]})}function M({isOpen:r,onClose:s,title:a,children:l}){const i=x.useRef(null);return x.useEffect(()=>{if(r){const t=n=>{n.key==="Escape"&&s()};return document.addEventListener("keydown",t),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}}},[r,s]),r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:t=>{t.target===t.currentTarget&&s()},children:e.jsxs("div",{ref:i,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:a}),e.jsx(o,{variant:"ghost",size:"sm",onClick:s,"aria-label":"Close modal",children:e.jsx(w,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6",children:l})]})}):null}function P({isOpen:r,onClose:s}){const a=k(),{register:l,handleSubmit:i,reset:t,formState:{errors:n}}=p({resolver:b(N)}),j=async y=>{await a.mutateAsync(y.name),t(),s()},u=()=>{t(),s()};return e.jsx(M,{isOpen:r,onClose:u,title:"Create New Group",children:e.jsxs("form",{onSubmit:i(j),className:"space-y-4",children:[e.jsx(f,{label:"Group Name",placeholder:"e.g., Summer Trip 2024",error:n.name?.message,...l("name")}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{type:"button",variant:"secondary",onClick:u,children:"Cancel"}),e.jsx(o,{type:"submit",loading:a.isPending,children:"Create"})]})]})})}function B(){const r=v(),[s,a]=x.useState(!1),{data:l,isLoading:i,error:t}=C();return i?e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{})]}):t?e.jsx(g,{icon:e.jsx(d,{size:48}),title:"Failed to load groups",description:"There was an error loading your groups. Please try again."}):e.jsxs("div",{children:[e.jsx(E,{title:"My Groups",description:"Manage your expense groups",action:e.jsxs(o,{onClick:()=>a(!0),children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Create Group"]})}),!l||l.length===0?e.jsx(g,{icon:e.jsx(d,{size:48}),title:"No groups yet",description:"Create your first group to start tracking expenses",action:e.jsxs(o,{onClick:()=>a(!0),children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Create Group"]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(n=>e.jsx(G,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(`/groups/${n.id}`),children:e.jsxs(S,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:n.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(d,{className:"mr-2 h-4 w-4"}),n.members.length," ",n.members.length===1?"member":"members"]})]})},n.id))}),e.jsx(P,{isOpen:s,onClose:()=>a(!1)})]})}export{B as GroupsListPage};
